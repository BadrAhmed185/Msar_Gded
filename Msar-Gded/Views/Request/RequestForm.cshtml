@model Msar_Gded.Models.ViewModels.StudentRequestVm
@using Msar_Gded.Helpers

@{
    ViewData["Title"] = "ุจูุงุจุฉ ุงูุชุญูููุงุช ุงูุทูุงุจูุฉ";
    Layout = null;
}


<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="utf-8" />
    <title>ุฅูุดุงุก ุทูุจ ุชุญููู</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.rtl.min.css" rel="stylesheet" />
    <link href="~/css/RequestForm.css" rel="stylesheet" />
    <link href="~/css/Error.css" rel="stylesheet" />

</head>
<body>

    <!-- Success Container -->
    <div class="success-container" id="successContainer">
        @if (TempData["Success"] != null)
        {
            <div class="success-message">
                <i class="fas fa-check-circle"></i>
                <div class="success-content">
                    <div class="success-title">Done.</div>
                    <div class="success-details">@TempData["Success"]</div>
                    <div class="success-details">ูุชู ุงูุฃู ูุฑุงุฌุนุฉ ุงูุทูุจ ู ุงุจูุงุบูู ุจุงูุฑุฏ ูู ุฃุณุฑุน ููุช โบ๏ธ.</div>

                </div>
                <button class="close-btn" onclick="closeMessage(this)">ร</button>
            </div>
        }
    </div>

    <!-- Error Container -->
    <div class="error-container" id="errorContainer">
        @if (TempData["Error"] != null)
        {
            <div class="error-message">
                <i class="fas fa-exclamation-circle"></i>
                <div class="error-content">
                    <div class="error-title">ูุดู ุงูุชุณุฌูู  ๐</div>
                    <div class="error-details">@TempData["Error"]</div>
                    @if(TempData["Errors"] is IEnumerable<string>  errors && errors.Any())
                    {
                        <ul>

                            @foreach (var error in errors)
                            {
                                <li>@error</li>
                            }                          </ul>                    }
                </div>
                <button class="close-btn" onclick="closeMessage(this)">ร</button>
            </div>
        }
    </div>

    <!-- Header -->
    <header class="header-container">
        <img src="~/images/MIS.jpg" class="header-img" alt="Right Logo" />
        <div class="header-title">ุงูุฅุฏุงุฑู ุงูุนุงูู ูุดุฆูู ุงูุชุนููู | ุฌุงูุนุฉ ุฃุณููุท</div>
        <img src="~/images/assiut.png" class="header-img" alt="Left Logo" />
    </header>
    <div class="container organizationInfo" >ุจูุงุจุฉ ุงูุชุญูููุงุช ุงูุทูุงุจูุฉ</div>
    <div class="container organizationInfo" >ุฅุฏุงุฑุฉ ุงูุชุณุฌูู (ููุชุจ ุงูุชุญูููุงุช ุงููุฑูุฒู)</div>
    <br>
    <hr style="width : 70%; margin : auto;">
    <br>
    <div class="container header-title" style=" text-align : center; color : #887c76;">ุทูุจ (ุชุญููู - ููู ููุฏ -  ุชุนุฏูู ุชุฑุดูุญ)</div>

    <div class="container my-2 request-form-container">

        <form asp-controller="Request" asp-action="RequestForm" asp-route-id="@Model.NationalId" id="RequestForm" method="post" enctype="multipart/form-data">

            <div class="row g-4">

                <!-- Right: Personal Information -->
                <div class="col-md-6">
                    <div class="section-header">ุงูุจูุงูุงุช ุงูุดุฎุตูุฉ ููุทุงูุจ</div>
                     
                    @{
                        if (TempData["StudentExists"] != null)
                        {
                            <div class="row">
                                <div class="col-6 mb-3">
                                    <label class="form-label">ุงูุงุณู</label>
                                    <input type="text" asp-for="Name" class="form-control" readonly />
                                </div>
                                <div class="col-6 mb-3">
                                    <label class="form-label">ุงูุฑูู ุงููููู</label>
                                    <input type="text" asp-for="NationalId" class="form-control" readonly />
                                </div>

                                <div class="col-6 mb-3">
                                    <label class="form-label">ุชุงุฑูุฎ ุงููููุงุฏ</label>
                                    <input type="date" asp-for="BirthDate" class="form-control" readonly />
                                </div>
                                <div class="col-6 mb-3">
                                    <label class="form-label">ููุงู ุงููููุงุฏ</label>
                                    <input type="text" asp-for="BirthPlace" class="form-control" readonly />
                                </div>

                                <div class="col-6 mb-3">
                                    <label class="form-label">ุฑูู ุงููุงุชู</label>
                                    <input type="text" asp-for="PhoneNumber" class="form-control" readonly />
                                </div>
                                <div class="col-6 mb-3">
                                    <label class="form-label">ุงูููุทูุฉ ุงูุชุนููููุฉ</label>
                                    <input type="text" asp-for="EducationalZone" class="form-control" readonly />
                                </div>

                                <div class="col-6 mb-3">
                                    <label class="form-label">ุดุนุจุฉ ุงูุซุงูููุฉ ุงูุนุงูุฉ</label>
                                    <select asp-for="HighSchoolDivision" class="form-select" asp-items="@(new SelectList(EnumHelper.GetSelectList<Msar_Gded.Enums.HighSchoolDivision>(), "Value", "Text", Model.HighSchoolDivision))" disabled>
                                        <option value="">-- ุงุฎุชุฑ ุงูุดุนุจุฉ --</option>
                                    </select>
                                </div>

                                <div class="col-6 mb-3">
                                    <label class="form-label">ุชุงุฑูุฎ ุงูุชุฎุฑุฌ</label>
                                    <input type="date" asp-for="GraduationDate" class="form-control" readonly />
                                </div>

                                <div class="col-6 mb-3">
                                    <label class="form-label">ุงููุฌููุน ุงูุงุนุชุจุงุฑู</label>
                                    <input type="number" asp-for="PureDegree" class="form-control" id="PureDegree" readonly />
                                </div>

                                <div class="col-6 mb-3">
                                    <label class="form-label">ุงููุฌููุน ูุน ุงููุบุฉ</label>
                                    <input type="number" asp-for="DegreeWithLanguage" class="form-control" id="DegreeWithLanguage" readonly />
                                </div>

                                <div class="col-12 mb-3">
                                    <label class="form-label">ุงููุฌููุน ุงูููู</label>
                                    <input type="number" asp-for="@Model.TotalDegree"   class="form-control" id="TotalDegree" readonly />
                                </div>

                                <div class="col-12 mb-3">
                                    <label class="form-label"> ุตูุฑุฉ ุฅุซุจุงุช ุงูุญุงูุฉ:</label>
                                    <div class="file-upload">
                                        <input type="file" asp-for="LeterOfStatusUpload" style="display :none;" class="form-control file-input" />

                                        <button type="button" class="btn btn-secondary view-file"
                                                data-url="@Url.Action("ViewFile", "Student", new { nationalId = Model.NationalId, fileType = "Status" })">
                                            ๐ผ๏ธ ุนุฑุถ
                                        </button>
                                    </div>
                                </div>

                                <div class="col-12 mb-3">
                                    <label class="form-label">ุตูุฑุฉ ุดูุงุฏุฉ ุงูุซุงูููุฉ ุงูุนุงูุฉ:</label>
                                    <div class="file-upload">
                                        <input type="file" asp-for="SchoolCertificateUpload" style="display :none;" display="none" class="form-control file-input" />

                                        <button type="button" class="btn btn-secondary view-file"
                                                data-url="@Url.Action("ViewFile", "Student", new { nationalId = Model.NationalId, fileType = "Certificate" })">
                                            ๐ผ๏ธ ุนุฑุถ
                                        </button>


                                    </div>
                                </div>
                            </div>


                        }
                        else
                        {
                              <div class="row">
                        <div class="col-6 mb-3">
                            <label class="form-label">ุงูุงุณู</label>
                            <input type="text" asp-for="Name" class="form-control" />
                        </div>
                        <div class="col-6 mb-3">
                            <label class="form-label">ุงูุฑูู ุงููููู</label>
                            <input type="text" asp-for="NationalId" class="form-control" readonly />
                        </div>

                        <div class="col-6 mb-3">
                            <label class="form-label">ุชุงุฑูุฎ ุงููููุงุฏ</label>
                            <input type="date" asp-for="BirthDate" class="form-control" />
                        </div>
                        <div class="col-6 mb-3">
                            <label class="form-label">ููุงู ุงููููุงุฏ</label>
                            <input type="text" asp-for="BirthPlace" class="form-control" />
                        </div>

                        <div class="col-6 mb-3">
                            <label class="form-label">ุฑูู ุงููุงุชู</label>
                            <input type="text" asp-for="PhoneNumber" class="form-control" />
                        </div>
                        <div class="col-6 mb-3">
                            <label class="form-label">ุงูููุทูุฉ ุงูุชุนููููุฉ</label>
                            <input type="text" asp-for="EducationalZone" class="form-control" />
                        </div>

                        <div class="col-6 mb-3">
                            <label class="form-label">ุดุนุจุฉ ุงูุซุงูููุฉ ุงูุนุงูุฉ</label>
                            <select asp-for="HighSchoolDivision" class="form-select" asp-items="@(new SelectList(EnumHelper.GetSelectList<Msar_Gded.Enums.HighSchoolDivision>(), "Value", "Text", Model.HighSchoolDivision))">
                                <option value="">-- ุงุฎุชุฑ ุงูุดุนุจุฉ --</option>
                            </select>
                        </div>

                        <div class="col-6 mb-3">
                            <label class="form-label">ุชุงุฑูุฎ ุงูุชุฎุฑุฌ</label>
                            <input type="date" asp-for="GraduationDate" class="form-control" />
                        </div>

                        <div class="col-6 mb-3">
                            <label class="form-label">ุงููุฌููุน ุงูุงุนุชุจุงุฑู</label>
                            <input type="number" asp-for="PureDegree" class="form-control" id="PureDegree" />
                        </div>

                        <div class="col-6 mb-3">
                            <label class="form-label">ุงููุฌููุน ูุน ุงููุบุฉ</label>
                            <input type="number" asp-for="DegreeWithLanguage" class="form-control" id="DegreeWithLanguage" />
                        </div>

                        <div class="col-12 mb-3">
                            <label class="form-label">ุงููุฌููุน ุงูููู</label>
                            <input type="number" asp-for="@Model.TotalDegree" class="form-control" id="TotalDegree" readonly />
                        </div>

                        <div class="col-12 mb-3">
                            <label class="form-label">ุฑูุน ุตูุฑุฉ ุฅุซุจุงุช ุงูุญุงูุฉ:</label>
                            <div class="file-upload">
                                <input type="file" asp-for="LeterOfStatusUpload"   class="form-control file-input" required/>
                                <button type="button" class="btn btn-secondary view-file"
                                        data-url="@Url.Action("ViewFile", "Student", new { nationalId = Model.NationalId, fileType = "Status" })">
                                    ๐ผ๏ธ ุนุฑุถ
                                </button>

                                <button type="button" class="btn btn-danger delete-file">๐๏ธ ุญุฐู</button>
                            </div>
                        </div>

                        <div class="col-12 mb-3">
                            <label class="form-label">ุฑูุน ุดูุงุฏุฉ ุงูุซุงูููุฉ ุงูุนุงูุฉ:</label>
                            <div class="file-upload">
                                <input type="file" asp-for="SchoolCertificateUpload"  class="form-control file-input" required/>
                                <button type="button" class="btn btn-secondary view-file"
                                        data-url="@Url.Action("ViewFile", "Student", new { nationalId = Model.NationalId, fileType = "Certificate" })">
                                    ๐ผ๏ธ ุนุฑุถ
                                </button>

                                <button type="button" class="btn btn-danger delete-file">๐๏ธ ุญุฐู</button>
                            </div>
                        </div>

                    </div>
                        }
                    }
                  
                </div>








































                <!-- Left: Request Procedures -->
                <div class="col-md-6">
                    <div class="section-header">ุงูุจูุงูุงุช ุงูุฎุงุตุฉ ุจุทูุจ ุงูุชุญููู</div>


                    <div class="mb-3">
                        <label class="form-label">ุงูุฌุงูุนุฉ ุงูุญุงููุฉ</label>
                        <select asp-for="UniversityId" class="form-select" asp-items="ViewBag.Universities" id="UniversityHasValue"></select>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">ุงููููุฉ ุงูุญุงููุฉ</label>
                        <select asp-for="CollegeId" class="form-select" asp-items="ViewBag.Colleges" id="CollegeHasValue"></select>
                    </div>


                    <div class="mb-3">
                        <label for="UniversityGrade" class="form-label">ุงููุฑูุฉ ุงูุญุงููุฉ ุงููููุฏ ุจูุง</label>
                        <select asp-for="@Model.UniversityGrade" class="form-select">
                            <option value="" selected>-- ุงุฎุชุฑ ุงููุฑูุฉ --</option>
                            <option value="1">ุงูุฃููู</option>
                            <option value="2">ุงูุซุงููู</option>
                            <option value="3">ุงูุซุงูุซู</option>
                            <option value="4">ุงูุฑุงุจุนู</option>
                            <option value="5">ุงูุฎุงูุณู</option>
                        </select>
                    </div>



                    <div class="mb-3">
                        <label class="form-label">ููุน ุงูุทูุจ</label>
                        <select required asp-for="TypeOfRequest" class="form-select" asp-items="@(new SelectList(EnumHelper.GetSelectList<Msar_Gded.Enums.RequestType>(), "Value", "Text", Model.TypeOfRequest))">
                            <option value="">-- ุงุฎุชุฑ ููุน ุงูุฅุณุชูุงุฑุฉ --</option>
                        </select>
                    </div>

                  <!--  <input type="hidden" asp-for="CurrentUniversityId" id="UniversityNeedValue" />
                    <input type="hidden" asp-for="CurrentCollegeId" id="UniversityHasValue" /> -->

                    <div class="mb-3">
                        <label class="form-label">ุงูุฌุงูุนุฉ ุงููุฑุงุฏ ุงูุชุญููู ุฅูููุง</label>
                        <select asp-for="DestinationUniversityId" class="form-select" asp-items="ViewBag.Universities"></select>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">ุงููููุฉ ุงููุฑุงุฏ ุงูุชุญููู ุฅูููุง</label>
                        <select asp-for="DestinationCollegeId" class="form-select" asp-items="ViewBag.Colleges"></select>
                    </div>

                    <div class="mb-3">
                        <label class="form-label">ุชุงุฑูุฎ ุงูุทูุจ</label>
                        <input type="date" asp-for="DateOfRequest" id="DateOfRequest" class="form-control" readonly />
                    </div>

                </div>

            </div>

            <!-- Terms Link -->
            <div class="text-center mt-4">
                <a href="#" id="termsLink" data-bs-toggle="modal" data-bs-target="#termsModal" class="btn btn-link fw-bold">
                    ุงุถุบุท ููุง ุฃููุง ููุฑุงุกุฉ ุงูุดุฑูุท ูุงูุฃุญูุงู
                </a>
            </div>

            <!-- Submit Button -->
            <div class="text-center mt-3">
                <button type="submit" class="btn-primary  submit-button" id="submitButton" disabled>ุฅุฑุณุงู ุงูุทูุจ</button>

            </div>

        </form>
    </div>

    <!-- Footer -->
    <footer class="footer-container">
        <div>ุฌููุน ุงูุญููู ูุญููุธุฉ ููุฑูุฒ ุชุทููุฑ ูุธู ุงููุนูููุงุช ุงูุฅุฏุงุฑูุฉ |2025 &copy; ุฌุงูุนุฉ ุฃุณููุท</div>
    </footer>

    <!-- Terms Modal -->
    <div class="modal fade" id="termsModal" tabindex="-1" aria-labelledby="termsModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">ุงูุดุฑูุท ูุงูุฃุญูุงู</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="ุฅุบูุงู"></button>
                </div>
                <div class="modal-body">
                    <p>ููุง ุณุชุธูุฑ ุงูุดุฑูุท ูุงูุฃุญูุงู ุงูุฎุงุตุฉ ุจุงููุธุงู...</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-success" id="acceptTerms" data-bs-dismiss="modal" style="background-color: #887C76;">ููุงูู</button>
                </div>
            </div>
        </div>
    </div>

    <!-- File Preview Modal -->
    <div class="modal fade" id="filePreviewModal" tabindex="-1" aria-labelledby="filePreviewLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" >ูุนุงููุฉ ุงูููู</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="ุฅุบูุงู"></button>
                </div>
                <div class="modal-body text-center">
                    <img id="previewImage" src="#" alt="Preview" class="img-fluid" />
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/js/RequestForm.js"></script>
    <script src="~/js/ValidateImageInput.js"></script>
</body>
</html>
